!function(e){"use strict";var i=e(".jeg_post_editor");function a(e){var i,a,t=e.split(":");return t[0]&&(i=t[2]?60*+t[0]*60+60*+t[1]+ +t[2]:t[1]?60*+t[0]+ +t[1]:+t[0]),a=new Date(1e3*i).toISOString(),a=i>=3600?a.substr(11,8):a.substr(14,5)}function t(){i.on("click",".jeg_fetch_button",(function(t){t.preventDefault();var n=i.find(".video-format-field"),d=i.find(".image-format-nav li"),r=i.find(".video-preview-format-nav li"),o=["multicategory-field","singlecategory-field"],f=e(this).data("action"),v=e(this).data("nonce"),l={},p={};switch(f){case"choose-video":var u=n.find(".data-video");u.length>0&&(u.each((function(i,a){l[e(a).attr("name")]=e(a).val()})),l.videotitle&&i.find('input[name="title"]').val(l.videotitle),l.videoduration&&i.find('input[name="duration"]').val(a(l.videoduration)),e(d).find('a[data-type="image"]').trigger("click"));break;case"embed-video":p.url=n.find('input[name="embed-video"]').val(),p.type=f,p.nonce=v,p.action="video_handler",function(i,a){return e.ajax({url:i,type:"POST",dataType:"json",data:a})}(jnews_ajax_url,p).done((function(t){1===t.response&&((l=t.details).title&&i.find('input[name="title"]').val(l.title),l.description&&tinymce&&tinymce.activeEditor.setContent(l.description),l.category&&o.forEach((function(i){e(document).trigger("selectize_add",[l.category.id,l.category.name,i])})),l.type&&"unknown"!==l.type&&(i.find('input[name="source_name"]').val(l.type),i.find('input[name="source_url"]').val(p.url)),l.duration&&i.find('input[name="duration"]').val(a(l.duration)),l.thumbnail&&(e(d).find('a[data-type="image-url"]').trigger("click"),i.find(".image-url-preview").attr("src",l.thumbnail).on("load",(function(){i.find(".preview-image").fadeIn("fast")})),i.find('input[name="image-url"]').val(l.thumbnail)),l.video_preview&&(e(r).find('a[data-type="video-preview-url"]').trigger("click"),i.find(".video-preview-url-preview").attr("src",l.video_preview).on("load",(function(){i.find(".preview-video-preview").fadeIn("fast")})),i.find('input[name="video-preview-url"]').val(l.video_preview)))}));break;default:return!1}}))}function n(){i.find(".video-format-nav li a").each((function(){var a=e(this);a.hasClass("active")&&("video"===a.data("type")&&i.find(".choose-video").fadeIn("fast"),"embed-video"===a.data("type")&&(i.find('input[name="embed-video"]').fadeIn("fast"),i.find(".jeg_embed_info").fadeIn("fast")))})),i.on("click",".video-format-nav li a",(function(a){a.preventDefault();var t=e(this);t.hasClass("active")||(i.find(".video-format-nav li a").removeClass("active"),t.addClass("active")),i.find(".video-format-field input, .video-format-field .choose-video, .jeg_embed_info").css({display:"none"}),"video"===t.data("type")&&(i.find('input[name="video-format"]').val("video"),i.find(".choose-video").fadeIn("fast"),i.find(".jeg_fetch_button").attr({"data-action":"choose-video"}),i.find(".jeg_fetch_button").data("action","choose-video")),"embed-video"===t.data("type")&&(i.find('input[name="video-format"]').val("embed-video"),i.find('input[name="embed-video"]').fadeIn("fast"),i.find(".jeg_embed_info").fadeIn("fast"),i.find(".jeg_fetch_button").attr({"data-action":"embed-video"}),i.find(".jeg_fetch_button").data("action","embed-video"))})),i.find(".image-format-nav li a").each((function(){var a=e(this);a.hasClass("active")&&("image"===a.data("type")&&i.find("#featured-image").fadeIn("fast"),"image-url"===a.data("type")&&i.find(".jeg_insert_url_wrapper").fadeIn("fast"))})),i.find(".video-preview-format-nav li a").each((function(){var a=e(this);a.hasClass("active")&&("video-preview"===a.data("type")&&i.find("#video-preview").fadeIn("fast"),"video-preview-url"===a.data("type")&&i.find(".jeg_insert_url_wrapper").fadeIn("fast"))})),i.find(".jeg_insert_url_wrapper .preview-image").on("click",".remove",(function(){var a=e(this).parent();e(a).fadeOut((function(){e(this).find(".image-url-preview").attr("src","")})),i.find('input[name="image-url"]').val("")})),i.find(".jeg_insert_url_wrapper .preview-video-preview").on("click",".remove",(function(){var a=e(this).parent();e(a).fadeOut((function(){e(this).find(".video-preview-url-preview").attr("src","")})),i.find('input[name="video-preview-url"]').val("")})),i.on("click",".image-format-nav li a",(function(a){a.preventDefault();var t=e(this);t.hasClass("active")||(i.find(".image-format-nav li a").removeClass("active"),t.addClass("active")),i.find(".image-format-field input, .image-format-field .jeg_upload_wrapper, .image-format-field  .jeg_insert_url_wrapper").css({display:"none"}),"image"===t.data("type")&&(i.find('input[name="image-format"]').val("image"),i.find("#featured-image").fadeIn("fast")),"image-url"===t.data("type")&&(i.find('input[name="image-format"]').val("image-url"),i.find(".jeg_insert_url_wrapper").fadeIn("fast"),i.find('input[name="image-url"]').fadeIn("fast"))})),i.on("click",".video-preview-format-nav li a",(function(a){a.preventDefault();var t=e(this);t.hasClass("active")||(i.find(".video-preview-format-nav li a").removeClass("active"),t.addClass("active")),i.find(".video-preview-format-field input, .video-preview-format-field .jeg_upload_wrapper, .video-preview-format-field  .jeg_insert_url_wrapper").css({display:"none"}),"video-preview"===t.data("type")&&(i.find('input[name="video-preview-format"]').val("video-preview"),i.find("#video-preview").fadeIn("fast")),"video-preview-url"===t.data("type")&&(i.find('input[name="video-preview-format"]').val("video-preview-url"),i.find(".jeg_insert_url_wrapper").fadeIn("fast"),i.find('input[name="video-preview-url"]').fadeIn("fast"))})),t()}e(document).on("ready",(function(){n()}))}(jQuery);