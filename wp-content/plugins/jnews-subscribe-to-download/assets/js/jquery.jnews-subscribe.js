!function(e){"use strict";({init:function(n){var t=this;t.container=void 0===n?e("body"):n,t.menu=e(".jeg_subscribe"),t.menuButton=t.menu.find("button.dl-btn"),t.menuForm=t.menu.find(".jeg_subscribe_form"),t.checkboxField=t.menu.find('input[type="checkbox"]'),t.setEvent()},setEvent:function(){var n=this;0!==n.menuButton.length&&n.menuButton.on("click",(function(t){n.toggleForm(e(this).data("subscribe-id"))})),0!==n.menuForm.length&&(n.menuForm.find("button.close").focus((function(){e(this).blur()})),n.menuForm.find("form").submit((function(t){t.preventDefault(),n.ajaxSubscribe(e(this))}))),0!==n.checkboxField.length&&n.checkboxField.on("change",(function(){var n=e(this).parents().find(".jeg_subscribe_form"),t=n.find('input[type="checkbox"]').length,i=n.find('input[type="checkbox"]:checked').length;n.find('button[type="submit"]').attr("disabled",i!==t)}))},toggleForm:function(n){var t=this;t.menuForm.each((function(){e(this).data("subscribe-id")===n&&e(this).addClass("show")})),t.menuForm.find("button.close").on("click",(function(e){e.preventDefault(),t.menuForm.hasClass("show")&&t.menuForm.removeClass("show")})),e(t.menuForm).on("click",(function(n){t.menuForm.hasClass("show")&&(e(n.target).parents().hasClass("modal-dialog")||t.menuForm.removeClass("show"))}))},ajaxSubscribe:function(e){var n=e.find('input[name="action"]'),t=e.find('input[type="email"]'),i=e.find('input[name="file_id"]'),s=e.find('input[name="after_submit"]'),a=e.parents().find(".jeg_subscribe_form").data("subscribe-id"),o=e.find('input[name="jnews-subscribe-nonce"]'),r={action:n.val(),nonce:o.val(),email:t.val(),after_submit:s.val(),form_id:a,file_id:i.val()};this.do_ajax(r,e)},do_ajax:function(n,t){var i=this,s=t.find(".form-message");if(s.html(""),""===n.email)s.html("<p class='alert alert-error'> Email Required </p>");else{var a=t.find('button[type="submit"]').html();t.find('button[type="submit"]').html('<i class="jnews-spinner fa fa-spinner fa-pulse active"></i>'),e.ajax({url:jnews_ajax_url,type:"post",dataType:"json",data:n,success:function(e){var n=!0,o="";for(var r in e)0==e[r].response&&(n=!1),n?o="<p class='alert alert-success'>"+e[r].string+"</p>":0==e[r].response&&('<i class="fa fa-times" aria-hidden="true"></i>'==e[r].string&&(e[r].string+=" "+jnews_subscribe.action_failed),o="<p class='alert alert-warning'>"+e[r].string+"</p>");s.html(o),t.find('button[type="submit"]').html(a),t.trigger("reset"),i.checkboxField.trigger("change")}})}}}).init()}(jQuery);